<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glassy and Dark Web Page</title>
    <style>
        body {
            background: linear-gradient(to right, #1c1c1c, #000000);
            color: #ffffff;
        }

        header {
            background: rgba(255, 255, 255, 0.15);
            padding: 20px;
            text-align: center;
        }

        h1 {
            font-size: 32px;
        }

        section {
            margin: 40px;
        }

        h2 {
            font-size: 24px;
            margin-bottom: 20px;
        }

        #chart-container {
            height: 400px;
            background-color: rgba(255, 255, 255, 0.15);
        }

        /* Custom background styles */
        .color-1 {
            background-color: #0a1b2f;
        }

        .color-2 {
            background-color: #2c5364;
        }

        .color-3 {
            background-color: #203a43;
        }

        .color-4 {
            background-color: #1e344a;
        }
    </style>
</head>

<body>
    <header>
        <h1>Glassy and Dark Web Page</h1>
    </header>
    <main>
        <section>
            <h2>Data Analysis</h2>
            <div id="chart-container"></div>
            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
            <script>
                // Assuming you have included the Chart.js library

                // Function to read and analyze the CSV/Excel file
                function analyzeFile(file, chartTypes) {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        var contents = e.target.result;

                        // Pass the file contents to the Python script for analysis
                        fetch('analysis.php', {
                            method: 'POST',
                            body: contents
                        })
                            .then(response => response.json())
                            .then(result => {
                                if (chartTypes.includes("line")) {
                                    // Create a line chart
                                    const lineChart = new Chart(document.getElementById("chart-container").getContext("2d"), {
                                        type: "line",
                                        data: result, // Chart data from PHP
                                        options: {}
                                    });
                                }

                                if (chartTypes.includes("bar")) {
                                    // Create a bar chart
                                    const barChart = new Chart(document.getElementById("chart-container").getContext("2d"), {
                                        type: "bar",
                                        data: result, // Chart data from PHP
                                        options: {}
                                    });
                                }

                                if (chartTypes.includes("pie")) {
                                    // Create a pie chart
                                    const pieChart = new Chart(document.getElementById("chart-container").getContext("2d"), {
                                        type: "pie",
                                        data: result, // Chart data from PHP
                                        options: {}
                                    });
                                }
                            });
                    };
                    reader.readAsText(file);
                }

                // Function to handle file upload and selected chart types
                function handleFileUpload(files) {
                    if (files.length > 0) {
                        // Select chart types
                        const selectedChartTypes = [];
                        const lineCheckbox = document.getElementById("line-chart");
                        const barCheckbox = document.getElementById("bar-chart");
                        const pieCheckbox = document.getElementById("pie-chart");

                        if (lineCheckbox.checked) {
                            selectedChartTypes.push("line");
                        }
                        if (barCheckbox.checked) {
                            selectedChartTypes.push("bar");
                        }
                        if (pieCheckbox.checked) {
                            selectedChartTypes.push("pie");
                        }

                        analyzeFile(files[0], selectedChartTypes);
                    }
                }
            </script>
        </section>
    </main>
    <section>
        <h2>Select Data Presentations</h2>
        <input type="checkbox" id="line-chart" name="chart-type" value="line">
        <label for="line-chart">Line Chart</label><br>
        <input type="checkbox" id="bar-chart" name="chart-type" value="bar">
        <label for="bar-chart">Bar Chart</label><br>
        <input type="checkbox" id="pie-chart" name="chart-type" value="pie">
        <label for="pie-chart">Pie Chart</label><br><br>
        <input type="file" accept=".csv, .xlsx, .xls" onchange="handleFileUpload(this.files)">
    </section>
</body>

</html>
